#!/bin/bash
echo 1 "$1" 2 "$2" 3 "$3" 4 "$4" 5 "$5" 6 "$6" 7 "$7" 8 "$8" 9 "$9"
fmwtkDestdir="$1"
fmwtkPrefix="$2"
fmwtkCapPrefix="$3"
fmwtkExecPrefix="$4"
fmwtkBindir="$5"
fmwtkDatarootdir="$6"
fmwtkDatadir="$7"
fmwtkSysconfdir="$8"
fmwtkSharedstatedir="$9"
if ! [ -n "$fmwtkPrefix" ]; then
    if ! [ -n "$fmwtkCapPrefix" ]; then
        fmwtkPrefix="$fmwtkDestdir"/usr/local
    else
        fmwtkPrefix="$fmwtkCapPrefix"
    fi
fi
echo "fmwtkPrefix: $fmwtkPrefix"
if ! [ -n "$fmwtkExecPrefix" ]; then
    fmwtkExecPrefix="$fmwtkPrefix"
fi
echo "fmwtkExecPrefix: $fmwtkExecPrefix"
if ! [ -n "$fmwtkBindir" ]; then
    fmwtkBindir="$fmwtkExecPrefix"/bin
fi
echo "fmwtkBindir: $fmwtkBindir"
if ! [ -n "$fmwtkDatarootdir" ]; then
    fmwtkDatarootdir="$fmwtkPrefix"/share
fi
echo "fmwtkDatarootdir: $fmwtkDatarootdir"
if ! [ -n "$fmwtkDatadir" ]; then
    fmwtkDatadir="$fmwtkDatarootdir"
fi
echo "fmwtkDatadir: $fmwtkDatadir"
if ! [ -n "$fmwtkSysconfdir" ]; then
    fmwtkSysconfdir="$fmwtkPrefix"/etc
fi
echo "fmwtkSysconfdir: $fmwtkSysconfdir"
if ! [ -n "$fmwtkSharedstatedir" ]; then
    fmwtkSharedstatedir="$fmwtkPrefix"/var
fi
echo "fmwtkSharedstatedir: $fmwtkSharedstatedir"

export fmwtkBindir
fmwtkBindirEsc="$(perl -0777 -e 'print(quotemeta($ENV{fmwtkBindir}))')"
echo "fmwtkBindirEsc: $fmwtkBindirEsc"
perl -0777 -p -i -e "s/\/usr\/local\/share/$fmwtkBindirEsc/g" scripts/futuramerlin-web-toolkit-build

export fmwtkSysconfdir
fmwtkSysconfdirEsc="$(perl -0777 -e 'print(quotemeta($ENV{fmwtkSysconfdir}))')"
echo "fmwtkSysconfdirEsc: $fmwtkSysconfdirEsc"
perl -0777 -p -i -e "s/\/usr\/local\/etc/$fmwtkSysconfdirEsc/g" scripts/futuramerlin-web-toolkit-build

export fmwtkDatadir
fmwtkDatadirEsc="$(perl -0777 -e 'print(quotemeta($ENV{fmwtkDatadir}))')"
echo "fmwtkDatadirEsc: $fmwtkDatadirEsc"
perl -0777 -p -i -e "s/\/usr\/local\/share/$fmwtkDatadirEsc/g" scripts/futuramerlin-web-toolkit-build

mkdir -p "$fmwtkBindir"
chmod +x scripts/*
cp scripts/* "$fmwtkBindir/"
mkdir -p "$fmwtkSysconfdir"
cp -v support/futuramerlin-web-toolkit.conf "$fmwtkSysconfdir/"
mkdir -p "$fmwtkSharedstatedir"/fmwtk
cp -v support/assets/m.css "$fmwtkPrefix"
cp -rv support/assets "$fmwtkDatadir/futuramerlin-web-toolkit/"
